<mat-card class="app-card">
  <mat-card-header class="app-card-header" style="margin-left:-20px;">
    <table style="width:100%;">
      <tr style="vertical-align: middle;">
      <td style="text-align: left;width:60px;">
        <img class="avatar"
             *ngIf="userService.user.products!=null"
             src="{{userService.user.photo}}">
      </td>
      <td style="text-align: left;padding:0px;margin:0px;">
        <div *ngIf="userService.user.products!=null && !takePicture" id="divProduct">
          {{userService.user.firstname}} {{userService.user.lastname}}
        </div>

        <app-product-picker *ngIf="userService.user.products==null"
                            width="100%"
                            (onclick)="selproduct($event)">
        </app-product-picker>

        <br>

        <webcam *ngIf="takePicture"
                [height]="300" width="400"
                [trigger]="triggerObservable"
                [videoOptions]="videoOptions"
                [imageQuality]="0.85"
                imageType="image/jpeg"
                (cameraSwitched)="cameraWasSwitched($event)"
                (initError)="handleInitError($event)"
                (imageCapture)="handleImage($event)"
        >
        </webcam>

      </td>
      <td id="lblPoints"
          style="text-align:right;font-size: 4.5vw;">
        <div  *ngIf="userService.user.products!=null && config.values.loyalty.enabled">
          {{userService.user.pts}}
          <span style="font-size: 2.5vw;">pts</span>&nbsp;
        </div>
      </td>
    </tr></table>
  </mat-card-header>

  <mat-card-content class="app-card-content">
    <div *ngIf="userService.user.products!=null && !takePicture"
         [ngStyle]="{'position':'relative','text-align':'center','width':'100%','height':config.values.light_profil?.height_preview}">
      <img
           style="height:100%;object-fit: cover;"
           src="{{userService.user.products[0]?.photo}}"
           alt="">

      <!--<div *ngIf="userService.user.products!=null" style="position:absolute;left:0px;top:0px;width:8%;width:50px;">-->
        <!--<button id="cmdRemoveProduct" class="button-image-toolbar"-->
                <!--mat-icon-button (click)="deleteProduct()"><mat-icon>remove_circle</mat-icon></button>-->

        <!--<button id="cmdAddProduct" class="button-image-toolbar" *ngIf="userService.user.products?.length<config.values.product_picker.max_product"-->
                <!--mat-icon-button (click)="addProduct()"><mat-icon>add_circle</mat-icon></button>-->

        <!--&lt;!&ndash;<button id="cmdPhotoProduct" class="button-image-toolbar"&ndash;&gt;-->
                <!--&lt;!&ndash;mat-icon-button (click)="takePhoto()"><mat-icon>camera</mat-icon></button>&ndash;&gt;-->
      <!--</div>-->

    </div>

    <div *ngIf="userService.user?.products!=null" style="width: 100%;text-align: center">
      <strong>{{userService.user?.products[0]?.label}}</strong>
    </div>

    <br>
    <button
            *ngIf="!takePicture" mat-button mat-raised-button
            (click)="takePhoto()">
      Photo
    </button>

    <button *ngIf="takePicture"
            mat-raised-button mat-button
            id="cmdTakePicture"
            (click)="triggerSnapshot()">
      Déclencher
    </button>

    <button *ngIf="userService.user?.products!=null && userService.user.products[0].services!=null"
            id="cmdServices"
            mat-button mat-raised-button
            (click)="linkServices()">Services associés
    </button>

    {{userService.user.message}}
  </mat-card-content>

</mat-card>
